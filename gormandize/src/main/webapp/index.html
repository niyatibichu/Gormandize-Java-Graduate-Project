<!doctype html>
<html ng-app="myapp">

<head>
<title>Grad Project</title>
<link rel="stylesheet" type="text/css" href="style.css">

<!-- Compiled and minified CSS -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">

<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">

</head>


<body ng-controller="newcontroller1">
	<!--H-E-A-D-E-R-->
	<header>
		<nav>
			<div class="nav-wrapper  light-blue darken-4 " id="bar1">
				<i class=" brand-logo align-left medium material-icons">restaurant</i>
				<a href="index.html" class="brand-logo left-align" id="appname">GORMANDISE
				</a> <a href="#" data-activates="nav-mobile"
					class="right button-collapse"> <i
					class="mdi-navigation-more-vert"></i></a>

				<ul id="nav-mobile" class="right hide-on-med-and-down">

					<li><a class="modal-trigger waves-effect waves-light"
						ng-click="addreview()" href="#rev" ng-show="currentUserSignedIn">Write
							Review</a> <!-- Modal Structure For Review -->
						<div id="rev" class="modal modal-fixed-footer"
							style="overflow-y: hidden, height:200px, top:2%">
							<div class="modal-content">
								<a href="#!"
									class="modal-action modal-close waves-effect waves-green btn-flat right ">CLOSE</a>
								<h4>Write Review</h4>
								<div class="row">
									<div class="input-field col s12">
										<input ng-model="new_res_name"
											placeholder="Add a new Restaurant" id="rest_name" type="text">
									</div>

									<div class="input-field col s12">
										<textarea ng-model="new_comment" id="textarea1"
											class="materialize-textarea"></textarea>
										<label for="textarea1">Textarea</label>
									</div>
								</div>

								<label style="color: black"><h5>Rate
										{{new_res_name}}!!</h5></label>
								<div>
									<div id="dropdown">
										<label>Select star</label> <select class="browser-default"
											ng-model="s.showrating"
											ng-change="showSelectValue(showrating)">
											<option value="" disabled selected>Give Rating</option>
											<option value="1">1</option>
											<option value="2">2</option>
											<option value="3">3</option>
											<option value="4">4</option>
											<option value="5">5</option>
										</select>
									</div>
								</div>
								<a
									class="btn-floating btn-large waves-effect waves-light red modal-action modal-close"
									ng-click="post_review(s)"><i class="material-icons">add</i></a>


							</div>
						</div></li>
					<a class="modal-trigger waves-effect waves-light"
						ng-click="login()" ng-hide="currentUserSignedIn" href="#login">Login</a>
					<a class="modal-trigger waves-effect waves-light"
						ng-click="logout()" ng-show="currentUserSignedIn" href="#logout">Logout</a>
					<span ng-show="currentUserSignedIn" ng-model="currentUser">{{currentUser}}</span>
					<!-- Modal Structure For Login  -->
					<div id="login" class="modal modal-fixed-footer">
						<div class="modal-content">
							<a href="#!"
								class="modal-action modal-close waves-effect waves-green btn-flat right ">CLOSE</a>
							<h4>Login</h4>
							<br>
							<div class="row" ng-controller="newcontroller1">
								<form class="col s12 simple-form" novalidate>

									<div class="row">
										<div class="input-field col s12">
											<input id="u3" type="text" class="validate"
												placeholder="Username" ng-model="login_uname">
										</div>
									</div>
									<div class="row">
										<div class="input-field col s12">
											<input id="password3" ng-model="login_pwd" type="password"
												class="validate" placeholder="Password">
										</div>
									</div>
									<br> <a
										class="modal-action modal-close waves-effect waves-light btn light-blue darken-4"
										ng-click="login_get()" value="Save1">Login!!</a>

								</form>

							</div>
						</div>
					</div>
					</li>


					<li><a class="modal-trigger waves-effect waves-light"
						href="#modal2" ng-click="register()" ng-hide="currentUserSignedIn">Register</a>
						<!-- Modal Structure For Register  -->
						<div id="modal2" class="modal modal-fixed-footer">
							<div class="modal-content">
								<a href="#!"
									class="modal-action modal-close waves-effect waves-green btn-flat right ">CLOSE</a>
								<h4>Register</h4>

								<br>
								<div class="row" ng-controller="RegController">
									<form class="col s12 simple-form" name="form" novalidate>
										<div class="row">
											<div class="input-field col s6">
												<input id="first_name" type="text" ng-model="fname"
													class="validate" placeholder="First Name" name="fname"
													required="">
											</div>
											<div ng-show="form.$submitted || form.fname.$touched">
												<div ng-show="form.fname.$error.required">Tell us your
													Firstname</div>
											</div>
											<br />
											<div class="input-field col s6">
												<input id="last_name" type="text" ng-model="lname"
													class="validate" placeholder="Last Name" name="lname"
													required="">

											</div>
											<div ng-show="form.$submitted || form.lname.$touched">
												<div ng-show="form.lname.$error.required">Tell us your
													Lastname</div>
											</div>
											<br />
										</div>

										<div class="row">
											<div class="input-field col s12">
												<input id="u2" type="text" class="validate"
													placeholder="Username" ng-model="uname" name="uname"
													required="">
											</div>
											<div ng-show="form.$submitted || form.uname.$touched">
												<div ng-show="form.uname.$error.required">Tell us your
													Username</div>
											</div>

										</div>

										<div class="row">
											<div class="input-field col s12">
												<input id="password2" ng-model="pwd" type="password"
													name="pass" class="validate" placeholder="Password"
													required="">
											</div>
											<div ng-show="form.$submitted || form.pass.$touched">
												<div ng-show="form.pass.$error.required">Please enter
													your Password</div>
											</div>
										</div>

										<div class="row">
											<div class="input-field col s12">
												<input id="email1" ng-model="email" type="email"
													class="validate" placeholder="Email" name="uemail"
													required="">
											</div>
											<div ng-show="form.$submitted || form.uemail.$touched">
												<span ng-show="form.uemail.$error.required">Tell us
													your email.</span> <span ng-show="form.uemail.$error.email">This
													is not a valid email.</span>
											</div>

										</div>
										<br> <a
											class="modal-action modal-close waves-effect waves-light btn "
											ng-click="update()" value="Save">Sign Up!!</a>
									</form>

								</div>
							</div>
						</div></li>
					<li><a class="modal-trigger waves-effect waves-light"
						href="#modal3" ng-click="about_us()">About Us</a> <!-- Modal Structure For About Us  -->
						<div id="modal3" class="modal modal-fixed-footer">
							<div class="modal-content">
								<a href="#!"
									class="modal-action modal-close waves-effect waves-green btn-flat right ">CLOSE</a>
								<h4>About Us</h4>
								<hr>
								<p>Using Gormandise Learn how to take full advantage of
									Gormandise from searching of restaurants to joining the Elite
									Squad and everything in between. Getting Started everything you
									need to know to join the ever-growing ranks of Gormandisers in
									your community and beyond. Using the Gormandise App Learn how
									the app works to improve the mobile experience.</p>
								<p>You can lookup on Gormandise for restaurants. Gormandise
									Elite Squad Everything you need to know about the people we
									recognize as the most active evangelists and role models for
									their communities.</p>
							</div>
						</div></li>

				</ul>

				<form class=" light-blue darken-4">
					<div class="input-field">
						<input id="search" type="search" ng-model="SearchBox"
							placeholder="search for restaurants by name" /> <label
							for="search"><i class="material-icons">search</i></label><i
							class="material-icons" ng-click="clearSearch()" id="clear">close</i>
					</div>
				</form>
			</div>
		</nav>

	</header>
	<br>


	<!--M-A-I-N-->
	<main>
	<div class="container">
		<div class="row">
			<div class="col s3" ng-repeat="index in hotel| filter:SearchBox">

				<div class="card orange lighten-5">
					<div class="card-content">

						<div>
							<h3>
								<span class="card-title">{{index.restaurant_name}}</span> <a
									class="btn-floating btn-large waves-effect waves-light  light-blue darken-4"
									ng-click="addreview_existing(index,index.avg_rating)"
									ng-show="currentUserSignedIn" href="#rev_exist"><i
									class="material-icons">add</i></a>
							</h3>
						</div>

						<div class="card-action">
							<div class="rating">
								<i class="material-icons" ng-model="avgrating"
									ng-repeat="t in getstars(index.average_rating) track by $index">star</i>
							</div>

							<a class="right blue-grey-text x1" href="#seereviewModal"
								ng-click="see_reviews(index.restaurant_name) ">{{index.reviews.length}}
								reviews </a>
						</div>
						<!-- Modal Structure For adding Reviews to existing restaurants -->
						<div id="rev_exist" class="modal modal-fixed-footer">
							<div class="modal-content">
								<a href="#!"
									class="modal-action modal-close waves-effect waves-green btn-flat right">CLOSE</a>
								<h4 ng-model="na.restaurant_name">Write Review for
									{{na.restaurant_name}}</h4>
								<br>



								<div class="row">
									<div class="input-field col s12">
										<textarea ng-model="r.new_comment1"
											class="materialize-textarea"></textarea>
										<label for="textarea1">Textarea</label>
									</div>
								</div>

								<br>
								<div id="dropdown">
									<label>Select star</label> <select class="browser-default"
										ng-model="r.showrating"
										ng-change="showSelectValue(showrating)">
										<option value="" disabled selected>Give Rating</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
									<p>option Selected = {{r.showrating}}</p>

								</div>

								<br>

								<div class="row">
									<a
										class="btn-floating btn-large waves-effect waves-light red modal-action modal-close"
										ng-click="post_review_exist(r,na)"
										ng-show="currentUserSignedIn"><i class="material-icons">add</i></a>
								</div>
							</div>
						</div>
						<!-- Modal Structure For See Reviews  -->
						<div id="seereviewModal" class="modal modal-fixed-footer">
							<div class="modal-content">
								<a href="#!"
									class="modal-action modal-close waves-effect waves-green btn-flat right ">CLOSE</a>
								<h4>View Reviews</h4>
								<hr>
								<ul class="collection">
									<li class="collection-item"
										ng-repeat="i in na1 track by $index"><span class="title">Name:
											{{na1[$index].username}}</span>
										<p>Comment: {{na1[$index].review}}</p> <br> Rating: <i
										class="material-icons " style="color: light-blue darken-4"
										ng-repeat="t in getstars(na1[$index].rating) track by $index">star</i>
									</li>
								</ul>


							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</main>


	<!--F-O-O-T-E-R-->
	<footer class=" light-blue darken-4 page-footer ">
		<div class="container">
			<div class="row">
				<div class="col l6 s12">
					<h5 class="white-text">Gormandise</h5>
					<p class="grey-text text-lighten-4">Terms Of Service</p>
				</div>
				<div class="col l4 offset-l2 s12">
					<h5 class="white-text">Discover</h5>
					<ul>
						<li><a class="grey-text text-lighten-3" href="#">About us</a></li>
						<li><a class="grey-text text-lighten-3" href="index.html">Home</a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="footer-copyright">
			<div class="container">
				ï¿½ 2014 Copyright Text <a class="grey-text text-lighten-4 right"
					href="#!">Gormandise Inc.</a>
			</div>
		</div>
	</footer>
	<!-- Compiled and minified JavaScript -->

	<script type="text/javascript"
		src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
	<script type="text/javascript"
		src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular.min.js"></script>
	<script type="text/javascript" src="app.js"></script>
	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/angular-materialize/0.2.1/angular-materialize.min.js"></script>

</body>

</html>
